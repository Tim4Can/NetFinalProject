{"remainingRequest":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\accessory\\Accessory.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\accessory\\Accessory.vue","mtime":1589965021118},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1589903380195},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1589903404205}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  getAccessoryKind,\n  getAccessoryInWarehouse,\n  getAllType,\n  addAccessoryInWarehouse,\n  getWarehouseName\n} from '@/api/accessory'\nimport Fuse from 'fuse.js'\nimport { PageView } from '@/layouts'\nimport ARow from \"ant-design-vue/es/grid/Row\";\n\n\nexport default {\n  components:{\n    ARow,\n    PageView\n  },\n  data() {\n    return {\n      //form\n      loading: true,\n      input:'',\n      visible: false,\n      confirmLoading: false,\n      ModalText: '',\n      attributeModelID: {\n        type: 'modelID',\n        cnType: '型号编号',\n        guide: '请输入型号编号'\n      },\n      attributeNum: {\n        type: 'num',\n        cnType: '数量',\n        guide: '请输入配件数量'\n      },\n      attributeWarehouse: {\n        type: 'warehouse',\n        cnType: '仓库名称',\n        guide: '请输入仓库名称'\n      },\n      //table columns\n      columns: [\n        {\n          title: '型号编号',\n          dataIndex: 'model',\n          align: 'center',\n        }, {\n          title: '配件类型',\n          dataIndex: 'type',\n          filters: [],\n          align: 'center',\n          onFilter: (value, record) => record.type.indexOf(value) === 0\n        }, {\n          title: '价格',\n          dataIndex: 'price',\n          sorter: (a, b) => a['price'] - b['price']\n        }, {\n          title: '库存数量',\n          dataIndex: 'num',\n          align: 'center',\n          sorter: (a, b) => a['num'] - b['num']\n        }, {\n          title: '所在仓库',\n          dataIndex: 'warehouse',\n          filters: [],\n          align: 'center',\n          onFilter: (value, record) => record.warehouse.indexOf(value) === 0\n        }],\n      //table selection\n\n      //form selection\n\n      //data\n      addData: {\n        accessoryID: '',\n        num: '',\n        warehouse: ''\n      },\n      Data: [],\n      DataShow: [],\n      warehouses: [],\n      types: [],\n      models: [],\n      showAddForm: false,\n\n      form: this.$form.createForm(this),\n\n\n    }\n  },\n  watch: {\n    input(pattern){\n      if( !pattern){\n        console.log(\"pattern\",pattern)\n\n        this.DataShow = this.Data\n      } else {\n        const option = {\n          keys: ['model'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.Data, option)\n        this.DataShow = fuse.search(pattern)\n      }\n    }\n  },\n  computed: {\n    emptyInput() {\n      if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\n        return true\n      else return false\n    }\n  },\n  methods: {\n    //add accessory button\n    addAccessoryButton() {\n      this.showAddForm = true\n    },\n    cancelAddForm() {\n      this.showAddForm = false\n    },\n    //show notification\n    openNotification () {\n      this.$notification.open({\n        message: '提示信息',\n        description: '添加成功！',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        },\n      });\n    },\n    //show modal\n    showModal() {\n      this.visible = true\n    },\n    handleOk(e) {\n      this.showAddForm = false\n      this.confirmLoading = true;\n      setTimeout(() => {\n        this.visible = false;\n        this.confirmLoading = false;\n        this.onClickSubmit();\n        this.openNotification();\n        console.log(\"addData\", this.addData)\n        //   this.onClickClearSelect()\n      }, 10)\n    },\n    handleCancel(e) {\n      console.log('Clicked cancel button');\n      this.visible = false\n    },\n    //  refresh Table\n\n    onClickReload () {\n      this.loading=true\n      getAccessoryInWarehouse().then((response) => {\n        var temp = [...response.data]\n        var result=[]\n        for(let item of temp){\n          var t = {\n            'key': item['key']+item['warehouseID'],\n            'model': item['model'],\n            'type' : item.type,\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          }\n          result.push(t)\n        }\n        this.Data = result\n        this.DataShow = this.Data\n        this.input = ''\n        this.loading=false\n      })\n    },\n    onClickClearSelect() {\n      this.addData.accessoryID = ''\n      this.addData.num = ''\n      this.addData.warehouse = ''\n    },\n    onClickSubmit() {\n      addAccessoryInWarehouse(this.addData).then(() => {\n        this.onClickReload();\n        console.log(this.addData)\n      })\n\n    }\n  },\n  created() {\n    //get table\n    getAccessoryKind().then((response) => {\n      console.log('model', response)\n      this.models = [...response.data]\n    })\n   getAccessoryInWarehouse().then((response) => {\n        var temp = [...response.data]\n        var result=[]\n        for(let item of temp){\n          var t = {\n            'key': item['key']+item['warehouseID'],\n            'model': item['model'],\n            'type' : item['type'],\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          }\n          result.push(t)\n        }\n        this.Data = result\n        this.DataShow = this.Data\n        this.input = ''\n        this.loading=false\n      })\n    //get all warehouseName\n    getWarehouseName().then((response) => {\n      this.warehouseSelection = [...response.data]\n      for (let val of this.warehouseSelection) {\n        let temp = {\n          'text': val,\n          'value': val\n        }\n        this.columns[4].filters.push(temp)\n        this.warehouses.push(val)\n      }\n      console.log(response)\n    })\n    //get all type\n    getAllType().then((response) => {\n      this.types = [...response.data]\n      for (let val of this.types) {\n        let temp = {\n          text: val,\n          value: val\n        }\n        this.columns[1].filters.push(temp)\n      }\n      console.log(response)\n    })\n\n\n  }\n\n}\n",{"version":3,"sources":["Accessory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"Accessory.vue","sourceRoot":"src/views/accessory","sourcesContent":["<template>\r\n  <page-view title=\"配件管理\">\r\n    <div id=\"layout\">\r\n      <a-layout>\r\n        <!-- input bar -->\r\n        <a-modal v-model=\"showAddForm\" footer>\r\n          <a-form\r\n            class=\"ant-advanced-search-form\"\r\n            :form=\"form\"\r\n          >\r\n            <a-form-item :label=\"attributeModelID.cnType\">\r\n              <!-- 选择型号 -->\r\n              <a-select\r\n                showSearch\r\n                :allowClear=\"true\"\r\n                placeholder=\"请填写型号\"\r\n                optionFilterProp=\"children\"\r\n                v-model=\"addData['accessoryID']\">\r\n                <a-select-option v-for=\"item in this.models\" :key=\"item.accessory\" :value=\"item.accessory\">\r\n                  {{item.model}}\r\n                </a-select-option>\r\n              </a-select>\r\n              <!-- 选择型号 -->\r\n            </a-form-item>\r\n            <a-form-item :label=\"attributeNum.cnType\">\r\n              <!-- 选择数量 -->\r\n              <a-input-number\r\n                v-model=\"addData[attributeNum.type]\"\r\n                :defaultValue=\"1\"\r\n                :min=\"1\"\r\n                :formatter=\"value => ` ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\"\r\n                :parser=\"value => value.replace(/\\$\\s?|(,*)/g, '')\"\r\n              />\r\n            </a-form-item>\r\n            <a-form-item :label=\"attributeWarehouse.cnType\">\r\n              <a-select\r\n                label=\"attributeWarehouse.cnType\"\r\n                placeholder=\"请选择仓库\"\r\n                showSearch\r\n                :allowClear=\"true\"\r\n                optionFilterProp=\"children\"\r\n                v-model=\"addData['warehouse']\">\r\n                <a-select-option v-for=\"item in warehouses\" :key=\"item\" :value=\"item\">{{item}}</a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item :wrapperCol=\"{ span: 24 }\" style=\"text-align: center\">\r\n              <div class=\"button-group\">\r\n                <a-button\r\n                  size=\"default\"\r\n                  class=\"button\"\r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  @click=\"showModal\"\r\n                  :disabled=\"emptyInput\"\r\n                >添加\r\n                </a-button>\r\n                <a-modal\r\n                  title=\"确认信息\"\r\n                  :visible=\"visible\"\r\n                  @ok=\"handleOk\"\r\n                  :confirmLoading=\"confirmLoading\"\r\n                  @cancel=\"handleCancel\"\r\n                >\r\n                  <p>{{`是否将 ${addData.num} 个编码为 ${addData.accessoryID} 的配件添加到 ${addData.warehouse}？`}}</p>\r\n                </a-modal>\r\n                <a-button\r\n                  size=\"default\"\r\n                  class=\"button\"\r\n                  type=\"danger\"\r\n                  @click=\"onClickClearSelect\"\r\n                  :disabled=\"emptyInput\"\r\n                >清空\r\n                </a-button>\r\n                <a-button style=\"margin-left: 8px\" @click=\"cancelAddForm\"\r\n                >取消\r\n                </a-button>\r\n              </div>\r\n            </a-form-item>\r\n          </a-form>\r\n        </a-modal>\r\n\r\n\r\n        <!-- input bar end -->\r\n        <!-- refresh button -->\r\n        <a-row :gutter=\"24\">\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"编号查询\">\r\n              <a-input placeholder=\"请输入待查询编号\" v-model=\"input\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n          <a-col :span=\"16\" style=\"text-align: right\">\r\n            <div style=\"margin-top: 2.5rem\">\r\n              <a-button\r\n                style=\"margin-right : 1rem\"\r\n                @click=\"addAccessoryButton()\"\r\n                type=\"primary\"\r\n                icon=\"plus\"\r\n              >添加配件\r\n              </a-button>\r\n              <a-button\r\n                size=\"default\"\r\n                type=\"primary\"\r\n                style=\"text-align: right\"\r\n                @click=\"onClickReload\"\r\n                icon=\"reload\"\r\n              >刷新表单\r\n              </a-button>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col :span=\"8\" style=\"text-align: right\">\r\n            <div >\r\n\r\n            </div>\r\n          </a-col>\r\n        </a-row>\r\n      </a-layout>\r\n    </div>\r\n      <!-- input bar end -->\r\n      <!-- refresh button -->\r\n      \r\n  \r\n      <!-- table -->\r\n      <a-card>\r\n        <a-table :columns=\"columns\" :dataSource=\"DataShow\" :loading=\"loading\" />\r\n      </a-card>\r\n      <!-- table end -->\r\n\r\n\r\n  </page-view>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getAccessoryKind,\r\n    getAccessoryInWarehouse,\r\n    getAllType,\r\n    addAccessoryInWarehouse,\r\n    getWarehouseName\r\n  } from '@/api/accessory'\r\n  import Fuse from 'fuse.js'\r\n  import { PageView } from '@/layouts'\r\n  import ARow from \"ant-design-vue/es/grid/Row\";\r\n\r\n\r\n  export default {\r\n    components:{\r\n      ARow,\r\n      PageView\r\n    },\r\n    data() {\r\n      return {\r\n        //form\r\n        loading: true,\r\n        input:'',\r\n        visible: false,\r\n        confirmLoading: false,\r\n        ModalText: '',\r\n        attributeModelID: {\r\n          type: 'modelID',\r\n          cnType: '型号编号',\r\n          guide: '请输入型号编号'\r\n        },\r\n        attributeNum: {\r\n          type: 'num',\r\n          cnType: '数量',\r\n          guide: '请输入配件数量'\r\n        },\r\n        attributeWarehouse: {\r\n          type: 'warehouse',\r\n          cnType: '仓库名称',\r\n          guide: '请输入仓库名称'\r\n        },\r\n        //table columns\r\n        columns: [\r\n          {\r\n            title: '型号编号',\r\n            dataIndex: 'model',\r\n            align: 'center',\r\n          }, {\r\n            title: '配件类型',\r\n            dataIndex: 'type',\r\n            filters: [],\r\n            align: 'center',\r\n            onFilter: (value, record) => record.type.indexOf(value) === 0\r\n          }, {\r\n            title: '价格',\r\n            dataIndex: 'price',\r\n            sorter: (a, b) => a['price'] - b['price']\r\n          }, {\r\n            title: '库存数量',\r\n            dataIndex: 'num',\r\n            align: 'center',\r\n            sorter: (a, b) => a['num'] - b['num']\r\n          }, {\r\n            title: '所在仓库',\r\n            dataIndex: 'warehouse',\r\n            filters: [],\r\n            align: 'center',\r\n            onFilter: (value, record) => record.warehouse.indexOf(value) === 0\r\n          }],\r\n        //table selection\r\n\r\n        //form selection\r\n\r\n        //data\r\n        addData: {\r\n          accessoryID: '',\r\n          num: '',\r\n          warehouse: ''\r\n        },\r\n        Data: [],\r\n        DataShow: [],\r\n        warehouses: [],\r\n        types: [],\r\n        models: [],\r\n        showAddForm: false,\r\n\r\n        form: this.$form.createForm(this),\r\n\r\n\r\n      }\r\n    },\r\n    watch: {\r\n      input(pattern){\r\n        if( !pattern){\r\n          console.log(\"pattern\",pattern)\r\n\r\n          this.DataShow = this.Data\r\n        } else {\r\n          const option = {\r\n            keys: ['model'],\r\n            threshold: 0.1\r\n          }\r\n          var fuse = new Fuse(this.Data, option)\r\n          this.DataShow = fuse.search(pattern)\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      emptyInput() {\r\n        if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\r\n          return true\r\n        else return false\r\n      }\r\n    },\r\n    methods: {\r\n      //add accessory button\r\n      addAccessoryButton() {\r\n        this.showAddForm = true\r\n      },\r\n      cancelAddForm() {\r\n        this.showAddForm = false\r\n      },\r\n      //show notification\r\n      openNotification () {\r\n        this.$notification.open({\r\n          message: '提示信息',\r\n          description: '添加成功！',\r\n          onClick: () => {\r\n            console.log('Notification Clicked!');\r\n          },\r\n        });\r\n      },\r\n      //show modal\r\n      showModal() {\r\n        this.visible = true\r\n      },\r\n      handleOk(e) {\r\n        this.showAddForm = false\r\n        this.confirmLoading = true;\r\n        setTimeout(() => {\r\n          this.visible = false;\r\n          this.confirmLoading = false;\r\n          this.onClickSubmit();\r\n          this.openNotification();\r\n          console.log(\"addData\", this.addData)\r\n          //   this.onClickClearSelect()\r\n        }, 10)\r\n      },\r\n      handleCancel(e) {\r\n        console.log('Clicked cancel button');\r\n        this.visible = false\r\n      },\r\n      //  refresh Table\r\n\r\n      onClickReload () {\r\n        this.loading=true\r\n        getAccessoryInWarehouse().then((response) => {\r\n          var temp = [...response.data]\r\n          var result=[]\r\n          for(let item of temp){\r\n            var t = {\r\n              'key': item['key']+item['warehouseID'],\r\n              'model': item['model'],\r\n              'type' : item.type,\r\n              'price': item['price'],\r\n              'num': item['num'],\r\n              'warehouse': item['warehouse']\r\n            }\r\n            result.push(t)\r\n          }\r\n          this.Data = result\r\n          this.DataShow = this.Data\r\n          this.input = ''\r\n          this.loading=false\r\n        })\r\n      },\r\n      onClickClearSelect() {\r\n        this.addData.accessoryID = ''\r\n        this.addData.num = ''\r\n        this.addData.warehouse = ''\r\n      },\r\n      onClickSubmit() {\r\n        addAccessoryInWarehouse(this.addData).then(() => {\r\n          this.onClickReload();\r\n          console.log(this.addData)\r\n        })\r\n\r\n      }\r\n    },\r\n    created() {\r\n      //get table\r\n      getAccessoryKind().then((response) => {\r\n        console.log('model', response)\r\n        this.models = [...response.data]\r\n      })\r\n     getAccessoryInWarehouse().then((response) => {\r\n          var temp = [...response.data]\r\n          var result=[]\r\n          for(let item of temp){\r\n            var t = {\r\n              'key': item['key']+item['warehouseID'],\r\n              'model': item['model'],\r\n              'type' : item['type'],\r\n              'price': item['price'],\r\n              'num': item['num'],\r\n              'warehouse': item['warehouse']\r\n            }\r\n            result.push(t)\r\n          }\r\n          this.Data = result\r\n          this.DataShow = this.Data\r\n          this.input = ''\r\n          this.loading=false\r\n        })\r\n      //get all warehouseName\r\n      getWarehouseName().then((response) => {\r\n        this.warehouseSelection = [...response.data]\r\n        for (let val of this.warehouseSelection) {\r\n          let temp = {\r\n            'text': val,\r\n            'value': val\r\n          }\r\n          this.columns[4].filters.push(temp)\r\n          this.warehouses.push(val)\r\n        }\r\n        console.log(response)\r\n      })\r\n      //get all type\r\n      getAllType().then((response) => {\r\n        this.types = [...response.data]\r\n        for (let val of this.types) {\r\n          let temp = {\r\n            text: val,\r\n            value: val\r\n          }\r\n          this.columns[1].filters.push(temp)\r\n        }\r\n        console.log(response)\r\n      })\r\n\r\n\r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import '~ant-design-vue/lib/style/themes/default.less';\r\n\r\n  #layout .ant-layout-header {\r\n    background: #fff;\r\n    color: #666;\r\n  }\r\n\r\n  .button-group {\r\n    margin-bottom: 1rem;\r\n\r\n    .button {\r\n      margin-right: 0.5rem;\r\n      margin-left: 0.5rem;\r\n      margin-top: 2.7rem;\r\n    }\r\n  }\r\n\r\n  .button-group2 {\r\n    margin-top: 3em;\r\n    margin-bottom: 1rem;\r\n    margin-left: 39rem\r\n  }\r\n</style>"]}]}