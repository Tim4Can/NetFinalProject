{"remainingRequest":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\equipment\\EquipmentUsing.vue?vue&type=style&index=0&id=4c7de0f1&lang=less&scoped=true&","dependencies":[{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\equipment\\EquipmentUsing.vue","mtime":1589903405531},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\css-loader\\index.js","mtime":1589903383310},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1589903404207},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1589903395815},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\less-loader\\dist\\cjs.js","mtime":1589903392905},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1589903404205}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '~ant-design-vue/lib/style/themes/default.less';\r\n.button-group {\r\n  margin-bottom: 1rem;\r\n  .button {\r\n    margin-left: 0.5rem;\r\n    margin-left: 0.5rem;\r\n  }\r\n}\r\n.ant-form-inline .ant-form-item {\r\n  display: inline-block;\r\n  margin-right: 0;\r\n}\r\n.ant-form-item-control-wrapper {\r\n  width: 100px;\r\n}\r\n.table-page-search-wrapper .ant-form-inline .ant-form-item .ant-form-item-control-wrapper {\r\n  width: 100%;\r\n}\r\n",{"version":3,"sources":["EquipmentUsing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EquipmentUsing.vue","sourceRoot":"src/views/equipment","sourcesContent":["<template>\r\n  <page-view title=\"在用器材\">\r\n    <div>\r\n      <a-card :bordered=\"false\">\r\n        <br />\r\n        <a-form class=\"ant-advanced-search-form\" :form=\"form\" inline>\r\n          <a-row :gutter=\"24\">\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>器材编号：</label>\r\n                <a-input placeholder=\"请输入器材编号\" v-model=\"inputID\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>型号：</label>\r\n                <a-input placeholder=\"请输入型号\" v-model=\"inputmodel\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>地址：</label>\r\n                <a-input placeholder=\"请输入地址\" v-model=\"inputAddress\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <div style=\"text-align: right; margin-top: 2rem\">\r\n                  <a-button @click=\"reload()\" size=\"large\" type=\"primary\" icon=\"reload\">刷新</a-button>\r\n                </div>\r\n              </a-form-item>\r\n            </a-col>\r\n          </a-row>\r\n        </a-form>\r\n        <br />\r\n        <div>\r\n          <a-table :columns=\"columns\" :dataSource=\"eDataShow\" rowKey=\"id\" bordered>\r\n            <template\r\n              v-for=\"col in ['id', 'type', 'damage', 'address', 'status']\"\r\n              :slot=\"col\"\r\n              slot-scope=\"text\"\r\n            >\r\n              <div :key=\"col\">{{ text }}</div>\r\n            </template>\r\n            <template slot=\"id\" slot-scope=\"text\">{{ text }}</template>\r\n            <template slot=\"status\" slot-scope=\"text\">\r\n              <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\" />\r\n            </template>\r\n            <template slot=\"toDetail\" slot-scope=\"text, record\">\r\n              <div>\r\n                <router-link :to=\"{ name: 'EquipDetail', params:{ id: getID(record.id)} }\">器材详情</router-link>\r\n              </div>\r\n            </template>\r\n          </a-table>\r\n        </div>\r\n      </a-card>\r\n    </div>\r\n  </page-view>\r\n</template>\r\n\r\n<script>\r\nimport { getEquipmentUsingList } from '@/api/equipment'\r\nimport { PageView } from '@/layouts'\r\nimport Fuse from 'fuse.js'\r\nconst statusMap = {\r\n  0: {\r\n    status: 'success',\r\n    text: '正常'\r\n  },\r\n  1: {\r\n    status: 'error',\r\n    text: '损坏'\r\n  }\r\n}\r\nconst columns = [\r\n  {\r\n    title: '器材编号',\r\n    dataIndex: 'id',\r\n    width: '15%',\r\n    align: 'center',\r\n    scopedSlots: { customRender: 'id' },\r\n    sorter: (a, b) => parseInt(a.id.toString().slice(2)) - parseInt(b.id.toString().slice(2))\r\n  },\r\n  {\r\n    title: '类别',\r\n    dataIndex: 'type',\r\n    align: 'center',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'type' }\r\n  },\r\n  {\r\n    title: '使用状态',\r\n    dataIndex: 'status',\r\n    align: 'center',\r\n    width: '10%',\r\n    filters: [\r\n      {\r\n        text: '正常',\r\n        value: '0'\r\n      },\r\n      {\r\n        text: '损坏',\r\n        value: '1'\r\n      }\r\n    ],\r\n    onFilter: (value, record) => record.status.indexOf(value) === 0,\r\n    scopedSlots: { customRender: 'status' }\r\n  },\r\n  {\r\n    title: '型号',\r\n    dataIndex: 'model',\r\n    align: 'center',\r\n    width: '12%',\r\n    scopedSlots: { customRender: 'model' }\r\n  },\r\n  {\r\n    title: '地址',\r\n    dataIndex: 'address',\r\n    align: 'center',\r\n    width: '30%',\r\n    scopedSlots: { customRender: 'address' }\r\n  },\r\n  {\r\n    title: ' ',\r\n    dataIndex: 'toDetail',\r\n    align: 'center',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'toDetail' }\r\n  }\r\n]\r\nlet inputID = ''\r\nlet inputAddress = ''\r\nlet inputmodel = ''\r\nconst eData = []\r\nconst eDataShow = []\r\nexport default {\r\n  inject: ['reload'],\r\n  name: 'EquipUsing',\r\n  components: {\r\n    PageView\r\n  },\r\n  data() {\r\n    return {\r\n      attribute: [{ type: 'type', cnType: '类别', guide: '类别筛选' }],\r\n      equipmentData: {\r\n        type: ''\r\n      },\r\n      eData,\r\n      eDataShow,\r\n      inputID: '',\r\n      inputAddress: '',\r\n      inputmodel: '',\r\n      columns,\r\n      advanced: false,\r\n      form: this.$form.createForm(this),\r\n      queryParam: {}\r\n    }\r\n  },\r\n  computed: {\r\n    emptyInput() {\r\n      if (\r\n        this.equipmentData.id !== '' ||\r\n        this.equipmentData.type !== '' ||\r\n        this.equipmentData.status !== '' ||\r\n        this.equipmentData.damage !== ''\r\n      ) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  filters: {\r\n    statusFilter(type) {\r\n      return statusMap[type].text\r\n    },\r\n    statusTypeFilter(type) {\r\n      return statusMap[type].status\r\n    }\r\n  },\r\n  methods: {\r\n    clickJump(record) {\r\n      console.log(record)\r\n    },\r\n    onClickClearSelect() {\r\n      this.equipmentData.type = ''\r\n    },\r\n    onClickSubmit() {\r\n      console.log(this.equipmentData)\r\n      this.onClickClearSelect()\r\n    },\r\n    handleChange(value, key, column) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        target[column] = value\r\n        this.eData = newData\r\n      }\r\n    },\r\n    edit(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        target.editable = true\r\n        this.eData = newData\r\n      }\r\n    },\r\n    save(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        delete target.editable\r\n        this.eData = newData\r\n        this.cacheData = newData.map(item => ({ ...item }))\r\n      }\r\n    },\r\n    cancel(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        Object.assign(target, this.cacheData.filter(item => key === item.key)[0])\r\n        delete target.editable\r\n        this.eData = newData\r\n      }\r\n    },\r\n    toggleAdvanced() {\r\n      this.advanced = !this.advanced\r\n    },\r\n    resetSearchForm() {\r\n      this.queryParam = {\r\n        date: moment(new Date())\r\n      }\r\n    },\r\n    getID(id) {\r\n      const newData = [...this.eDataShow]\r\n      const target = newData.filter(item => id === item.id)[0]\r\n      console.log(target.id)\r\n      return target.id\r\n    }\r\n  },\r\n  watch: {\r\n    inputID(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['id'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    },\r\n    inputAddress(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['address'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    },\r\n    inputmodel(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['model'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    getEquipmentUsingList().then(response => {\r\n      console.log(...response.data)\r\n      this.eData = [...response.data]\r\n      this.eDataShow = this.eData\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~ant-design-vue/lib/style/themes/default.less';\r\n.button-group {\r\n  margin-bottom: 1rem;\r\n  .button {\r\n    margin-left: 0.5rem;\r\n    margin-left: 0.5rem;\r\n  }\r\n}\r\n.ant-form-inline .ant-form-item {\r\n  display: inline-block;\r\n  margin-right: 0;\r\n}\r\n.ant-form-item-control-wrapper {\r\n  width: 100px;\r\n}\r\n.table-page-search-wrapper .ant-form-inline .ant-form-item .ant-form-item-control-wrapper {\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}