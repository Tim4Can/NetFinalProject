{"remainingRequest":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\equipment\\EquipmentUsing.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\equipment\\EquipmentUsing.vue","mtime":1589903405531},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1589903380195},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1589903404205}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport _Object$assign from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport _objectSpread from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _parseInt from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getEquipmentUsingList } from '@/api/equipment';\nimport { PageView } from '@/layouts';\nimport Fuse from 'fuse.js';\nvar statusMap = {\n  0: {\n    status: 'success',\n    text: '正常'\n  },\n  1: {\n    status: 'error',\n    text: '损坏'\n  }\n};\nvar columns = [{\n  title: '器材编号',\n  dataIndex: 'id',\n  width: '15%',\n  align: 'center',\n  scopedSlots: {\n    customRender: 'id'\n  },\n  sorter: function sorter(a, b) {\n    return _parseInt(a.id.toString().slice(2)) - _parseInt(b.id.toString().slice(2));\n  }\n}, {\n  title: '类别',\n  dataIndex: 'type',\n  align: 'center',\n  width: '10%',\n  scopedSlots: {\n    customRender: 'type'\n  }\n}, {\n  title: '使用状态',\n  dataIndex: 'status',\n  align: 'center',\n  width: '10%',\n  filters: [{\n    text: '正常',\n    value: '0'\n  }, {\n    text: '损坏',\n    value: '1'\n  }],\n  onFilter: function onFilter(value, record) {\n    return record.status.indexOf(value) === 0;\n  },\n  scopedSlots: {\n    customRender: 'status'\n  }\n}, {\n  title: '型号',\n  dataIndex: 'model',\n  align: 'center',\n  width: '12%',\n  scopedSlots: {\n    customRender: 'model'\n  }\n}, {\n  title: '地址',\n  dataIndex: 'address',\n  align: 'center',\n  width: '30%',\n  scopedSlots: {\n    customRender: 'address'\n  }\n}, {\n  title: ' ',\n  dataIndex: 'toDetail',\n  align: 'center',\n  width: '15%',\n  scopedSlots: {\n    customRender: 'toDetail'\n  }\n}];\nvar inputID = '';\nvar inputAddress = '';\nvar inputmodel = '';\nvar eData = [];\nvar eDataShow = [];\nexport default {\n  inject: ['reload'],\n  name: 'EquipUsing',\n  components: {\n    PageView: PageView\n  },\n  data: function data() {\n    return {\n      attribute: [{\n        type: 'type',\n        cnType: '类别',\n        guide: '类别筛选'\n      }],\n      equipmentData: {\n        type: ''\n      },\n      eData: eData,\n      eDataShow: eDataShow,\n      inputID: '',\n      inputAddress: '',\n      inputmodel: '',\n      columns: columns,\n      advanced: false,\n      form: this.$form.createForm(this),\n      queryParam: {}\n    };\n  },\n  computed: {\n    emptyInput: function emptyInput() {\n      if (this.equipmentData.id !== '' || this.equipmentData.type !== '' || this.equipmentData.status !== '' || this.equipmentData.damage !== '') {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n  filters: {\n    statusFilter: function statusFilter(type) {\n      return statusMap[type].text;\n    },\n    statusTypeFilter: function statusTypeFilter(type) {\n      return statusMap[type].status;\n    }\n  },\n  methods: {\n    clickJump: function clickJump(record) {\n      console.log(record);\n    },\n    onClickClearSelect: function onClickClearSelect() {\n      this.equipmentData.type = '';\n    },\n    onClickSubmit: function onClickSubmit() {\n      console.log(this.equipmentData);\n      this.onClickClearSelect();\n    },\n    handleChange: function handleChange(value, key, column) {\n      var newData = _toConsumableArray(this.eData);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target[column] = value;\n        this.eData = newData;\n      }\n    },\n    edit: function edit(key) {\n      var newData = _toConsumableArray(this.eData);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target.editable = true;\n        this.eData = newData;\n      }\n    },\n    save: function save(key) {\n      var newData = _toConsumableArray(this.eData);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        delete target.editable;\n        this.eData = newData;\n        this.cacheData = newData.map(function (item) {\n          return _objectSpread({}, item);\n        });\n      }\n    },\n    cancel: function cancel(key) {\n      var newData = _toConsumableArray(this.eData);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        _Object$assign(target, this.cacheData.filter(function (item) {\n          return key === item.key;\n        })[0]);\n\n        delete target.editable;\n        this.eData = newData;\n      }\n    },\n    toggleAdvanced: function toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    resetSearchForm: function resetSearchForm() {\n      this.queryParam = {\n        date: moment(new Date())\n      };\n    },\n    getID: function getID(id) {\n      var newData = _toConsumableArray(this.eDataShow);\n\n      var target = newData.filter(function (item) {\n        return id === item.id;\n      })[0];\n      console.log(target.id);\n      return target.id;\n    }\n  },\n  watch: {\n    inputID: function inputID(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData;\n      } else {\n        var option = {\n          keys: ['id'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.eData, option);\n        this.eDataShow = fuse.search(pattern);\n        console.log(this.eDataShow);\n      }\n    },\n    inputAddress: function inputAddress(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData;\n      } else {\n        var option = {\n          keys: ['address'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.eData, option);\n        this.eDataShow = fuse.search(pattern);\n        console.log(this.eDataShow);\n      }\n    },\n    inputmodel: function inputmodel(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData;\n      } else {\n        var option = {\n          keys: ['model'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.eData, option);\n        this.eDataShow = fuse.search(pattern);\n        console.log(this.eDataShow);\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    getEquipmentUsingList().then(function (response) {\n      var _console;\n\n      (_console = console).log.apply(_console, _toConsumableArray(response.data));\n\n      _this.eData = _toConsumableArray(response.data);\n      _this.eDataShow = _this.eData;\n    });\n  }\n};",{"version":3,"sources":["EquipmentUsing.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <page-view title=\"在用器材\">\r\n    <div>\r\n      <a-card :bordered=\"false\">\r\n        <br />\r\n        <a-form class=\"ant-advanced-search-form\" :form=\"form\" inline>\r\n          <a-row :gutter=\"24\">\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>器材编号：</label>\r\n                <a-input placeholder=\"请输入器材编号\" v-model=\"inputID\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>型号：</label>\r\n                <a-input placeholder=\"请输入型号\" v-model=\"inputmodel\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <label>地址：</label>\r\n                <a-input placeholder=\"请输入地址\" v-model=\"inputAddress\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :span=\"6\">\r\n              <a-form-item>\r\n                <div style=\"text-align: right; margin-top: 2rem\">\r\n                  <a-button @click=\"reload()\" size=\"large\" type=\"primary\" icon=\"reload\">刷新</a-button>\r\n                </div>\r\n              </a-form-item>\r\n            </a-col>\r\n          </a-row>\r\n        </a-form>\r\n        <br />\r\n        <div>\r\n          <a-table :columns=\"columns\" :dataSource=\"eDataShow\" rowKey=\"id\" bordered>\r\n            <template\r\n              v-for=\"col in ['id', 'type', 'damage', 'address', 'status']\"\r\n              :slot=\"col\"\r\n              slot-scope=\"text\"\r\n            >\r\n              <div :key=\"col\">{{ text }}</div>\r\n            </template>\r\n            <template slot=\"id\" slot-scope=\"text\">{{ text }}</template>\r\n            <template slot=\"status\" slot-scope=\"text\">\r\n              <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\" />\r\n            </template>\r\n            <template slot=\"toDetail\" slot-scope=\"text, record\">\r\n              <div>\r\n                <router-link :to=\"{ name: 'EquipDetail', params:{ id: getID(record.id)} }\">器材详情</router-link>\r\n              </div>\r\n            </template>\r\n          </a-table>\r\n        </div>\r\n      </a-card>\r\n    </div>\r\n  </page-view>\r\n</template>\r\n\r\n<script>\r\nimport { getEquipmentUsingList } from '@/api/equipment'\r\nimport { PageView } from '@/layouts'\r\nimport Fuse from 'fuse.js'\r\nconst statusMap = {\r\n  0: {\r\n    status: 'success',\r\n    text: '正常'\r\n  },\r\n  1: {\r\n    status: 'error',\r\n    text: '损坏'\r\n  }\r\n}\r\nconst columns = [\r\n  {\r\n    title: '器材编号',\r\n    dataIndex: 'id',\r\n    width: '15%',\r\n    align: 'center',\r\n    scopedSlots: { customRender: 'id' },\r\n    sorter: (a, b) => parseInt(a.id.toString().slice(2)) - parseInt(b.id.toString().slice(2))\r\n  },\r\n  {\r\n    title: '类别',\r\n    dataIndex: 'type',\r\n    align: 'center',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'type' }\r\n  },\r\n  {\r\n    title: '使用状态',\r\n    dataIndex: 'status',\r\n    align: 'center',\r\n    width: '10%',\r\n    filters: [\r\n      {\r\n        text: '正常',\r\n        value: '0'\r\n      },\r\n      {\r\n        text: '损坏',\r\n        value: '1'\r\n      }\r\n    ],\r\n    onFilter: (value, record) => record.status.indexOf(value) === 0,\r\n    scopedSlots: { customRender: 'status' }\r\n  },\r\n  {\r\n    title: '型号',\r\n    dataIndex: 'model',\r\n    align: 'center',\r\n    width: '12%',\r\n    scopedSlots: { customRender: 'model' }\r\n  },\r\n  {\r\n    title: '地址',\r\n    dataIndex: 'address',\r\n    align: 'center',\r\n    width: '30%',\r\n    scopedSlots: { customRender: 'address' }\r\n  },\r\n  {\r\n    title: ' ',\r\n    dataIndex: 'toDetail',\r\n    align: 'center',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'toDetail' }\r\n  }\r\n]\r\nlet inputID = ''\r\nlet inputAddress = ''\r\nlet inputmodel = ''\r\nconst eData = []\r\nconst eDataShow = []\r\nexport default {\r\n  inject: ['reload'],\r\n  name: 'EquipUsing',\r\n  components: {\r\n    PageView\r\n  },\r\n  data() {\r\n    return {\r\n      attribute: [{ type: 'type', cnType: '类别', guide: '类别筛选' }],\r\n      equipmentData: {\r\n        type: ''\r\n      },\r\n      eData,\r\n      eDataShow,\r\n      inputID: '',\r\n      inputAddress: '',\r\n      inputmodel: '',\r\n      columns,\r\n      advanced: false,\r\n      form: this.$form.createForm(this),\r\n      queryParam: {}\r\n    }\r\n  },\r\n  computed: {\r\n    emptyInput() {\r\n      if (\r\n        this.equipmentData.id !== '' ||\r\n        this.equipmentData.type !== '' ||\r\n        this.equipmentData.status !== '' ||\r\n        this.equipmentData.damage !== ''\r\n      ) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  filters: {\r\n    statusFilter(type) {\r\n      return statusMap[type].text\r\n    },\r\n    statusTypeFilter(type) {\r\n      return statusMap[type].status\r\n    }\r\n  },\r\n  methods: {\r\n    clickJump(record) {\r\n      console.log(record)\r\n    },\r\n    onClickClearSelect() {\r\n      this.equipmentData.type = ''\r\n    },\r\n    onClickSubmit() {\r\n      console.log(this.equipmentData)\r\n      this.onClickClearSelect()\r\n    },\r\n    handleChange(value, key, column) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        target[column] = value\r\n        this.eData = newData\r\n      }\r\n    },\r\n    edit(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        target.editable = true\r\n        this.eData = newData\r\n      }\r\n    },\r\n    save(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        delete target.editable\r\n        this.eData = newData\r\n        this.cacheData = newData.map(item => ({ ...item }))\r\n      }\r\n    },\r\n    cancel(key) {\r\n      const newData = [...this.eData]\r\n      const target = newData.filter(item => key === item.key)[0]\r\n      if (target) {\r\n        Object.assign(target, this.cacheData.filter(item => key === item.key)[0])\r\n        delete target.editable\r\n        this.eData = newData\r\n      }\r\n    },\r\n    toggleAdvanced() {\r\n      this.advanced = !this.advanced\r\n    },\r\n    resetSearchForm() {\r\n      this.queryParam = {\r\n        date: moment(new Date())\r\n      }\r\n    },\r\n    getID(id) {\r\n      const newData = [...this.eDataShow]\r\n      const target = newData.filter(item => id === item.id)[0]\r\n      console.log(target.id)\r\n      return target.id\r\n    }\r\n  },\r\n  watch: {\r\n    inputID(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['id'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    },\r\n    inputAddress(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['address'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    },\r\n    inputmodel(pattern) {\r\n      if (pattern == '') {\r\n        this.eDataShow = this.eData\r\n      } else {\r\n        const option = {\r\n          keys: ['model'],\r\n          threshold: 0.1\r\n        }\r\n        var fuse = new Fuse(this.eData, option)\r\n        this.eDataShow = fuse.search(pattern)\r\n        console.log(this.eDataShow)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    getEquipmentUsingList().then(response => {\r\n      console.log(...response.data)\r\n      this.eData = [...response.data]\r\n      this.eDataShow = this.eData\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~ant-design-vue/lib/style/themes/default.less';\r\n.button-group {\r\n  margin-bottom: 1rem;\r\n  .button {\r\n    margin-left: 0.5rem;\r\n    margin-left: 0.5rem;\r\n  }\r\n}\r\n.ant-form-inline .ant-form-item {\r\n  display: inline-block;\r\n  margin-right: 0;\r\n}\r\n.ant-form-item-control-wrapper {\r\n  width: 100px;\r\n}\r\n.table-page-search-wrapper .ant-form-inline .ant-form-item .ant-form-item-control-wrapper {\r\n  width: 100%;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/equipment"}]}