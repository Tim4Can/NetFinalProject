{"remainingRequest":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\user\\MyPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\user\\MyPage.vue","mtime":1589963567585},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _objectSpread2;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { STable } from '@/components';\nimport { PageView } from '@/layouts';\nimport Fuse from 'fuse.js';\nimport md5 from 'md5';\nimport ARow from \"ant-design-vue/es/grid/Row\";\nimport ACol from \"ant-design-vue/es/grid/Col\";\nimport { timeFix } from '@/utils/util';\nimport { mapGetters } from 'vuex';\nimport { Button } from 'ant-design-vue';\nimport HeadInfo from '@/components/tools/HeadInfo';\nimport { Radar } from '@/components';\nimport { getMyPost, getMyLike } from '@/api/myInfo';\nimport { deleteTreehole } from '@/api/Treehole';\nimport AFormItem from \"ant-design-vue/es/form/FormItem\";\nexport default {\n  components: {\n    AFormItem: AFormItem,\n    ACol: ACol,\n    ARow: ARow,\n    PageView: PageView,\n    Radar: Radar,\n    STable: STable\n  },\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      timeFix: timeFix(),\n      avatar: '',\n      user: {},\n      projects: [],\n      loading: true,\n      radarLoading: true,\n      activities: [],\n      teams: [],\n      old_password: '',\n      new_password: '',\n      form: this.$form.createForm(this),\n      showPasswordForm: false,\n      new_identity: {\n        id: '',\n        newPassword: ''\n      },\n      visible3: false,\n      postData: [],\n      likeData: [],\n      allPostData: [],\n      allLikeData: [],\n      totalPage1: '',\n      totalPage2: '',\n      current1: 1,\n      current2: 1\n    }, _defineProperty(_ref, \"loading\", true), _defineProperty(_ref, \"radarLoading\", true), _defineProperty(_ref, \"deleteInfo\", ''), _defineProperty(_ref, \"todelete\", ''), _defineProperty(_ref, \"confirmLoading\", false), _defineProperty(_ref, \"tabList\", [{\n      key: 'tab1',\n      // tab: 'tab1',\n      scopedSlots: {\n        tab: 'customRender'\n      }\n    }, {\n      key: 'tab2',\n      tab: 'tab2'\n    }]), _defineProperty(_ref, \"tabListNoTitle\", [{\n      key: '发帖',\n      tab: '发帖'\n    }, {\n      key: '收藏',\n      tab: '收藏'\n    }]), _defineProperty(_ref, \"key\", 'tab1'), _defineProperty(_ref, \"noTitleKey\", '发帖'), _ref;\n  },\n  computed: {\n    userInfo: function userInfo() {\n      return this.$store.getters.userInfo;\n    }\n  },\n  created: function created() {\n    this.user = this.$store.getters.userInfo;\n    this.avatar = this.userInfo.avatar;\n  },\n  methods: _objectSpread({}, mapGetters(['nickname', 'welcome']), (_objectSpread2 = {\n    cancelModifyPassword: function cancelModifyPassword() {\n      console.log('Cancel modify passsword');\n    },\n    modifyPassButton: function modifyPassButton() {\n      this.showPasswordForm = true;\n    }\n  }, _defineProperty(_objectSpread2, \"cancelModifyPassword\", function cancelModifyPassword() {\n    this.showPasswordForm = false;\n  }), _defineProperty(_objectSpread2, \"handleSubmit\", function handleSubmit(e) {\n    var _this = this;\n\n    e.preventDefault();\n    this.form.validateFields(function (err, value) {\n      if (!err) {\n        if (md5(value.old_password) === _this.userInfo.password) {\n          _this.new_identity.newPassword = md5(value.new_password);\n          _this.new_identity.id = _this.userInfo.id;\n          console.log(_this.new_identity);\n          modifyPassword(_this.new_identity).then(function () {\n            _this.$message.success('密码修改成功！');\n          });\n          console.log(\"Pass!\");\n        } else {\n          _this.$message.error('旧密码输入错误！');\n\n          console.log(\"Failed!\");\n        }\n      }\n    });\n    this.showPasswordForm = false;\n  }), _defineProperty(_objectSpread2, \"onClickCancel\", function onClickCancel() {\n    this.visible3 = false;\n  }), _defineProperty(_objectSpread2, \"onChange1\", function onChange1(current) {\n    var _this2 = this;\n\n    this.current1 = current;\n    getMyPost({\n      id: 1750000,\n      page: this.current1 - 1\n    }).then(function (response) {\n      console.log(response);\n      console.log(_this2.page);\n      _this2.allPostData = response.data;\n      _this2.postData = _this2.allPostData.list;\n      _this2.totalPage1 = _this2.allPostData.total;\n    });\n  }), _defineProperty(_objectSpread2, \"onChange2\", function onChange2(current) {\n    var _this3 = this;\n\n    this.current2 = current;\n    getMyLike(this.current2).then(function (response) {\n      console.log(response);\n      console.log(_this3.page);\n      _this3.allLikeData = response.data;\n      _this3.likeData = _this3.allLikeData.likeData;\n      _this3.totalPage2 = _this3.allLikeData.total; //总页数\n    });\n  }), _defineProperty(_objectSpread2, \"onClickDelete\", function onClickDelete(id) {\n    console.log(id);\n    this.todelete = id;\n    this.visible3 = true;\n  }), _defineProperty(_objectSpread2, \"onClickDeleteRow\", function onClickDeleteRow() {\n    var _this4 = this;\n\n    var h = this.$createElement;\n    this.visible3 = false;\n    deleteTreehole(this.todelete).then(function (response) {\n      _this4.deleteInfo = response.info;\n\n      if (_this4.deleteInfo === 'ok') {\n        _this4.sfData = _toConsumableArray(response.data);\n        _this4.sfDataShow = _this4.sfData;\n\n        _this4.$notification.open({\n          message: '删除成功',\n          description: '本条发帖信息删除成功',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"check\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n      } else {\n        _this4.$notification.open({\n          message: '删除失败',\n          description: '本条发帖信息删除失败',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"warning\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n      }\n    });\n  }), _objectSpread2)),\n  mounted: function mounted() {\n    var _this5 = this;\n\n    console.log(this.$store.getters.userInfo);\n    getMyPost({\n      id: 1750000,\n      page: this.current1 - 1\n    }).then(function (response) {\n      console.log(response);\n      console.log(_this5.page);\n      _this5.allPostData = response.data;\n      _this5.postData = _this5.allPostData.list;\n      _this5.totalPage1 = _this5.allPostData.total;\n    }), getMyLike({\n      id: userInfo.id,\n      page: this.current2 - 1\n    }).then(function (response) {\n      console.log(response);\n      console.log(_this5.page);\n      _this5.allLikeData = response.data;\n      _this5.likeData = _this5.allLikeData.likeData;\n      _this5.totalPage2 = _this5.allLikeData.totalPage; //总页数\n    });\n  }\n};",{"version":3,"sources":["MyPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <page-view :avatar=\"userInfo.headPortrait\" :title=\"false\">\r\n    <div slot=\"headerContent\">\r\n      <div class=\"title\">{{ timeFix }}，{{ user.name }}！</div>\r\n    </div>\r\n    <a-row :gutter=\"24\">\r\n      <!--个人信息-->\r\n        <a-col\r\n          style=\"padding: 0 12px\"\r\n          :xl=\"8\"\r\n          :lg=\"24\"\r\n          :md=\"24\"\r\n          :sm=\"24\"\r\n          :xs=\"24\">\r\n          <!--个人信息-->\r\n          <a-card\r\n            style=\"margin-bottom: 24px; margin-top: 0px\"\r\n            :bordered=\"false\"\r\n            title=\"个人信息\"\r\n            :body-style=\"{ padding: 0 }\">\r\n            <a-card>\r\n              <a-row style=\"margin-bottom: 12px\">\r\n                <a-icon type=\"idcard\" theme=\"twoTone\" twoToneColor=\"#3A5FCD\"/>\r\n                <strong> 学号：</strong>\r\n                {{ userInfo.id }}\r\n              </a-row>\r\n              <a-row style=\"margin-bottom: 12px\">\r\n                <a-icon type=\"tag\" theme=\"twoTone\" twoToneColor=\"#3A5FCD\"/>\r\n                <strong> 姓名：</strong>\r\n                {{ userInfo.name }}\r\n              </a-row>\r\n              <a-row style=\"margin-bottom: 12px\">\r\n                <a-icon type=\"tag\" theme=\"twoTone\" twoToneColor=\"#3A5FCD\"/>\r\n                <strong> 昵称：</strong>\r\n                {{ userInfo.nickName }}\r\n              </a-row>\r\n            </a-card>\r\n          </a-card>\r\n          <!--密码修改-->\r\n          <div>\r\n            <a-row style=\"text-align: center\">\r\n              <a-button @click=\"modifyPassButton\" type=\"primary\" icon=\"lock\"> 修改密码</a-button>\r\n              <a-modal v-model=\"showPasswordForm\" footer=\"\">\r\n                <a-form title=\"修改密码\" @submit=\"handleSubmit\" :form=\"form\">\r\n                  <a-form-item\r\n                    :wrapperCol=\"{ span: 24 }\"\r\n                    style=\"text-align: center\"\r\n                  >\r\n                    <h3>修改密码</h3>\r\n                  </a-form-item>\r\n                  <a-form-item\r\n                    label=\"旧密码\"\r\n                    :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                    :wrapperCol=\"{lg: {span: 10}, sm: {span: 17} }\">\r\n                    <a-input\r\n                      type=\"password\"\r\n                      v-decorator=\"[\r\n            'old_password',\r\n            {rules: [{ required: true, message: '请输入旧的密码' }]}\r\n          ]\"\r\n                      name=\"old_password\"\r\n                      placeholder=\"请输入旧的密码\"/>\r\n                  </a-form-item>\r\n                  <a-form-item\r\n                    label=\"新密码\"\r\n                    :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                    :wrapperCol=\"{lg: {span: 10}, sm: {span: 17} }\">\r\n                    <a-input\r\n                      type=\"password\"\r\n                      v-decorator=\"[\r\n            'new_password',\r\n            {rules: [{ required: true, message: '请输入新的密码' }]}\r\n          ]\"\r\n                      name=\"new_password\"\r\n                      placeholder=\"请输入新的密码\"/>\r\n                  </a-form-item>\r\n                  <a-form-item\r\n                    :wrapperCol=\"{ span: 24 }\"\r\n                    style=\"text-align: center\"\r\n                  >\r\n                    <a-button htmlType=\"submit\" type=\"primary\">提交</a-button>\r\n                    <a-button style=\"margin-left: 8px\" @click=\"cancelModifyPassword\">取消</a-button>\r\n                  </a-form-item>\r\n\r\n                </a-form>\r\n              </a-modal>\r\n            </a-row>\r\n          </div>\r\n        </a-col>\r\n      <a-col :xl=\"16\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\r\n        <a-card\r\n          style=\"width:100%\"\r\n          :tabList=\"tabListNoTitle\"\r\n          :activeTabKey=\"noTitleKey\"\r\n          @tabChange=\"key => onTabChange(key, 'noTitleKey')\"\r\n        >\r\n      <template v-if=\"noTitleKey === '发帖'\">\r\n        <a-list :dataSource=\"postData\">\r\n          <a-list-item slot=\"renderItem\" slot-scope=\"item, index\">\r\n             <a slot=\"actions\" @click=\"onClickDelete(item.id)\">删除</a>\r\n             <a-modal\r\n                title=\"确认删除\"\r\n                :visible=\"visible3\"\r\n                @ok=\"onClickDeleteRow\"\r\n                @cancel=\"onClickCancel\"\r\n             >\r\n             <div class=\"modal\">\r\n                是否删除本条帖子\r\n             </div>\r\n             </a-modal>\r\n              <a-list-item-meta :title='item.title'>\r\n                <a-avatar\r\n                  width=\"72\"\r\n                  slot=\"avatar\"\r\n                  :src=\"item.headPortrait\"\r\n                />\r\n                <div slot=\"description\">\r\n                  <ellipsis :length=\"70\">{{ item.content }}</ellipsis>\r\n                </div>\r\n                <br/>\r\n                <div slot=\"description\">\r\n                  <ellipsis :length=\"70\">{{ item.sendTime }}</ellipsis>\r\n                </div>\r\n\r\n              </a-list-item-meta>\r\n              <div>\r\n                 <router-link :to=\"{ name: 'postDetail', params:{ id: item.id} }\">帖子详情</router-link>\r\n              </div>\r\n          </a-list-item>\r\n        </a-list>\r\n        <div style=\"margin-top:20px\">\r\n          <a-pagination @change=\"onChange1\" :current=\"current\" :total=\"(totalPage1+1)*10\" />\r\n        </div>\r\n      </template>\r\n      <template v-if=\"noTitleKey === '收藏'\">\r\n        <a-list :dataSource=\"likeData\">\r\n          <a-list-item>\r\n            <a-card :bordered=\"false\" style=\"width:100%\">\r\n              <a-card-meta title=\"item.title\">\r\n                <img style=\"width:100px\"\r\n                   slot=\"avatar\"\r\n                   :src=\"item.image\"\r\n                 />\r\n              </a-card-meta>\r\n            </a-card>\r\n          </a-list-item>\r\n        </a-list>\r\n        <div style=\"margin-top:20px\">\r\n          <a-pagination @change=\"onChange2\" :current=\"current\" :total=\"(totalPage2+1)*10\" />\r\n        </div>\r\n      </template>\r\n       </a-card>\r\n      </a-col>\r\n    </a-row>\r\n  </page-view>\r\n</template>\r\n\r\n<script>\r\nimport { STable } from '@/components'\r\nimport { PageView } from '@/layouts'\r\nimport Fuse from 'fuse.js'\r\nimport md5 from 'md5'\r\nimport ARow from \"ant-design-vue/es/grid/Row\";\r\nimport ACol from \"ant-design-vue/es/grid/Col\";\r\nimport {timeFix} from '@/utils/util'\r\nimport {mapGetters} from 'vuex'\r\nimport {Button} from 'ant-design-vue'\r\nimport HeadInfo from '@/components/tools/HeadInfo'\r\nimport {Radar} from '@/components'\r\nimport {getMyPost, getMyLike} from '@/api/myInfo'\r\nimport {deleteTreehole} from '@/api/Treehole'\r\nimport AFormItem from \"ant-design-vue/es/form/FormItem\";\r\n\r\nexport default {\r\n    components: {\r\n        AFormItem,\r\n        ACol,\r\n        ARow,\r\n        PageView,\r\n        Radar,\r\n        STable,\r\n      },\r\n    data() {\r\n      return {\r\n        timeFix: timeFix(),\r\n        avatar: '',\r\n        user: {},\r\n        projects: [],\r\n        loading: true,\r\n        radarLoading: true,\r\n        activities: [],\r\n        teams: [],\r\n        old_password: '',\r\n        new_password: '',\r\n        form: this.$form.createForm(this),\r\n        showPasswordForm: false,\r\n        new_identity: {\r\n          id: '',\r\n          newPassword: '',\r\n        },\r\n        visible3: false,\r\n        postData: [],\r\n        likeData: [],\r\n        allPostData: [],\r\n        allLikeData: [],\r\n        totalPage1: '',\r\n        totalPage2: '',\r\n        current1: 1,\r\n        current2: 1,\r\n        loading: true,\r\n        radarLoading: true,\r\n        deleteInfo:'',\r\n        todelete:'',\r\n        confirmLoading: false,\r\n          //userInfo:this.$store.getters.userInfo,\r\n\r\n        tabList: [\r\n          {\r\n            key: 'tab1',\r\n            // tab: 'tab1',\r\n            scopedSlots: { tab: 'customRender' },\r\n          },\r\n          {\r\n            key: 'tab2',\r\n            tab: 'tab2',\r\n          },\r\n        ],\r\n        tabListNoTitle: [\r\n          {\r\n            key: '发帖',\r\n            tab: '发帖',\r\n          },\r\n          {\r\n            key: '收藏',\r\n            tab: '收藏',\r\n          },\r\n        ],\r\n        key: 'tab1',\r\n        noTitleKey: '发帖',\r\n      };\r\n    },\r\n    computed: {\r\n      userInfo() {\r\n        return this.$store.getters.userInfo\r\n      }\r\n    },\r\n    created() {\r\n      this.user = this.$store.getters.userInfo\r\n      this.avatar = this.userInfo.avatar\r\n    },\r\n    methods: {\r\n      ...mapGetters(['nickname', 'welcome']),\r\n      cancelModifyPassword() {\r\n        console.log('Cancel modify passsword')\r\n      },\r\n      modifyPassButton() {\r\n        this.showPasswordForm = true;\r\n      },\r\n      cancelModifyPassword() {\r\n        this.showPasswordForm = false;\r\n      },\r\n      handleSubmit(e) {\r\n        e.preventDefault()\r\n        this.form.validateFields((err, value) => {\r\n          if (!err) {\r\n            if (md5(value.old_password) === this.userInfo.password) {\r\n              this.new_identity.newPassword = md5(value.new_password)\r\n              this.new_identity.id = this.userInfo.id\r\n              console.log(this.new_identity)\r\n              modifyPassword(this.new_identity).then(() => {\r\n                this.$message.success('密码修改成功！')\r\n              })\r\n              console.log(\"Pass!\")\r\n            } else {\r\n              this.$message.error('旧密码输入错误！')\r\n              console.log(\"Failed!\")\r\n            }\r\n          }\r\n        })\r\n        this.showPasswordForm = false;\r\n      },\r\n      onClickCancel(){\r\n        this.visible3=false;\r\n      },\r\n      onChange1(current){\r\n        this.current1=current;\r\n          getMyPost({id:1750000,page:(this.current1-1)}).then((response)=>{\r\n              console.log(response);\r\n              console.log(this.page);\r\n              this.allPostData=response.data;\r\n              this.postData=this.allPostData.list;\r\n              this.totalPage1=this.allPostData.total\r\n\r\n          })\r\n     },\r\n     onChange2(current){\r\n        this.current2=current;\r\n        getMyLike(this.current2).then((response)=>{\r\n          console.log(response);\r\n          console.log(this.page);\r\n          this.allLikeData=response.data;\r\n          this.likeData=this.allLikeData.likeData;\r\n          this.totalPage2=this.allLikeData.total //总页数\r\n      })\r\n     },\r\n     onClickDelete (id) {\r\n        console.log(id)\r\n        this.todelete = id\r\n        this.visible3 = true;\r\n      },\r\n      onClickDeleteRow () {\r\n        this.visible3 = false\r\n        deleteTreehole(this.todelete).then((response) => {\r\n        this.deleteInfo = response.info\r\n        if(this.deleteInfo === 'ok'){\r\n          this.sfData = [...response.data]\r\n          this.sfDataShow = this.sfData\r\n          this.$notification.open({\r\n          message: '删除成功',\r\n          description: '本条发帖信息删除成功',\r\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\r\n        });\r\n        }\r\n        else{\r\n          this.$notification.open({\r\n          message: '删除失败',\r\n          description: '本条发帖信息删除失败',\r\n          icon: <a-icon type=\"warning\" style=\"color: #108ee9\" />,\r\n        });\r\n        }\r\n      })\r\n      },\r\n    },\r\n    mounted(){\r\n      console.log(this.$store.getters.userInfo)\r\n      getMyPost({id:1750000,page:(this.current1-1)}).then((response)=>{\r\n        console.log(response);\r\n        console.log(this.page);\r\n        this.allPostData=response.data;\r\n        this.postData=this.allPostData.list;\r\n        this.totalPage1=this.allPostData.total\r\n\r\n      }),\r\n      getMyLike({id:userInfo.id,page:(this.current2-1)}).then((response)=>{\r\n        console.log(response);\r\n        console.log(this.page);\r\n        this.allLikeData=response.data;\r\n        this.likeData=this.allLikeData.likeData;\r\n        this.totalPage2=this.allLikeData.totalPage //总页数\r\n      })\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.addButton{\r\n    position: absolute;\r\n    z-index: 999;\r\n    right:1em;\r\n    top:0em;\r\n  }\r\n</style>"],"sourceRoot":"src/views/user"}]}