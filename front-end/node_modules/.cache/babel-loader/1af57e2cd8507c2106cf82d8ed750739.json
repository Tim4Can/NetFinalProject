{"remainingRequest":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\accessory\\Accessory.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\src\\views\\accessory\\Accessory.vue","mtime":1589965021118},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1589903380195},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589903381409},{"path":"D:\\Death in TJU\\Junior_2nd\\专项综合\\Project\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1589903404205}],"contextDependencies":[],"result":["import _getIterator from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/get-iterator\";\nimport _toConsumableArray from \"D:\\\\Death in TJU\\\\Junior_2nd\\\\\\u4E13\\u9879\\u7EFC\\u5408\\\\Project\\\\front-end\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAccessoryKind, getAccessoryInWarehouse, getAllType, addAccessoryInWarehouse, getWarehouseName } from '@/api/accessory';\nimport Fuse from 'fuse.js';\nimport { PageView } from '@/layouts';\nimport ARow from \"ant-design-vue/es/grid/Row\";\nexport default {\n  components: {\n    ARow: ARow,\n    PageView: PageView\n  },\n  data: function data() {\n    return {\n      //form\n      loading: true,\n      input: '',\n      visible: false,\n      confirmLoading: false,\n      ModalText: '',\n      attributeModelID: {\n        type: 'modelID',\n        cnType: '型号编号',\n        guide: '请输入型号编号'\n      },\n      attributeNum: {\n        type: 'num',\n        cnType: '数量',\n        guide: '请输入配件数量'\n      },\n      attributeWarehouse: {\n        type: 'warehouse',\n        cnType: '仓库名称',\n        guide: '请输入仓库名称'\n      },\n      //table columns\n      columns: [{\n        title: '型号编号',\n        dataIndex: 'model',\n        align: 'center'\n      }, {\n        title: '配件类型',\n        dataIndex: 'type',\n        filters: [],\n        align: 'center',\n        onFilter: function onFilter(value, record) {\n          return record.type.indexOf(value) === 0;\n        }\n      }, {\n        title: '价格',\n        dataIndex: 'price',\n        sorter: function sorter(a, b) {\n          return a['price'] - b['price'];\n        }\n      }, {\n        title: '库存数量',\n        dataIndex: 'num',\n        align: 'center',\n        sorter: function sorter(a, b) {\n          return a['num'] - b['num'];\n        }\n      }, {\n        title: '所在仓库',\n        dataIndex: 'warehouse',\n        filters: [],\n        align: 'center',\n        onFilter: function onFilter(value, record) {\n          return record.warehouse.indexOf(value) === 0;\n        }\n      }],\n      //table selection\n      //form selection\n      //data\n      addData: {\n        accessoryID: '',\n        num: '',\n        warehouse: ''\n      },\n      Data: [],\n      DataShow: [],\n      warehouses: [],\n      types: [],\n      models: [],\n      showAddForm: false,\n      form: this.$form.createForm(this)\n    };\n  },\n  watch: {\n    input: function input(pattern) {\n      if (!pattern) {\n        console.log(\"pattern\", pattern);\n        this.DataShow = this.Data;\n      } else {\n        var option = {\n          keys: ['model'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.Data, option);\n        this.DataShow = fuse.search(pattern);\n      }\n    }\n  },\n  computed: {\n    emptyInput: function emptyInput() {\n      if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '') return true;else return false;\n    }\n  },\n  methods: {\n    //add accessory button\n    addAccessoryButton: function addAccessoryButton() {\n      this.showAddForm = true;\n    },\n    cancelAddForm: function cancelAddForm() {\n      this.showAddForm = false;\n    },\n    //show notification\n    openNotification: function openNotification() {\n      this.$notification.open({\n        message: '提示信息',\n        description: '添加成功！',\n        onClick: function onClick() {\n          console.log('Notification Clicked!');\n        }\n      });\n    },\n    //show modal\n    showModal: function showModal() {\n      this.visible = true;\n    },\n    handleOk: function handleOk(e) {\n      var _this = this;\n\n      this.showAddForm = false;\n      this.confirmLoading = true;\n      setTimeout(function () {\n        _this.visible = false;\n        _this.confirmLoading = false;\n\n        _this.onClickSubmit();\n\n        _this.openNotification();\n\n        console.log(\"addData\", _this.addData); //   this.onClickClearSelect()\n      }, 10);\n    },\n    handleCancel: function handleCancel(e) {\n      console.log('Clicked cancel button');\n      this.visible = false;\n    },\n    //  refresh Table\n    onClickReload: function onClickReload() {\n      var _this2 = this;\n\n      this.loading = true;\n      getAccessoryInWarehouse().then(function (response) {\n        var temp = _toConsumableArray(response.data);\n\n        var result = [];\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(temp), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            var t = {\n              'key': item['key'] + item['warehouseID'],\n              'model': item['model'],\n              'type': item.type,\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            };\n            result.push(t);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        _this2.Data = result;\n        _this2.DataShow = _this2.Data;\n        _this2.input = '';\n        _this2.loading = false;\n      });\n    },\n    onClickClearSelect: function onClickClearSelect() {\n      this.addData.accessoryID = '';\n      this.addData.num = '';\n      this.addData.warehouse = '';\n    },\n    onClickSubmit: function onClickSubmit() {\n      var _this3 = this;\n\n      addAccessoryInWarehouse(this.addData).then(function () {\n        _this3.onClickReload();\n\n        console.log(_this3.addData);\n      });\n    }\n  },\n  created: function created() {\n    var _this4 = this;\n\n    //get table\n    getAccessoryKind().then(function (response) {\n      console.log('model', response);\n      _this4.models = _toConsumableArray(response.data);\n    });\n    getAccessoryInWarehouse().then(function (response) {\n      var temp = _toConsumableArray(response.data);\n\n      var result = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = _getIterator(temp), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          var t = {\n            'key': item['key'] + item['warehouseID'],\n            'model': item['model'],\n            'type': item['type'],\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          };\n          result.push(t);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      _this4.Data = result;\n      _this4.DataShow = _this4.Data;\n      _this4.input = '';\n      _this4.loading = false;\n    }); //get all warehouseName\n\n    getWarehouseName().then(function (response) {\n      _this4.warehouseSelection = _toConsumableArray(response.data);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = _getIterator(_this4.warehouseSelection), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var val = _step3.value;\n          var temp = {\n            'text': val,\n            'value': val\n          };\n\n          _this4.columns[4].filters.push(temp);\n\n          _this4.warehouses.push(val);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      console.log(response);\n    }); //get all type\n\n    getAllType().then(function (response) {\n      _this4.types = _toConsumableArray(response.data);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = _getIterator(_this4.types), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var val = _step4.value;\n          var temp = {\n            text: val,\n            value: val\n          };\n\n          _this4.columns[1].filters.push(temp);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      console.log(response);\n    });\n  }\n};",{"version":3,"sources":["Accessory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <page-view title=\"配件管理\">\r\n    <div id=\"layout\">\r\n      <a-layout>\r\n        <!-- input bar -->\r\n        <a-modal v-model=\"showAddForm\" footer>\r\n          <a-form\r\n            class=\"ant-advanced-search-form\"\r\n            :form=\"form\"\r\n          >\r\n            <a-form-item :label=\"attributeModelID.cnType\">\r\n              <!-- 选择型号 -->\r\n              <a-select\r\n                showSearch\r\n                :allowClear=\"true\"\r\n                placeholder=\"请填写型号\"\r\n                optionFilterProp=\"children\"\r\n                v-model=\"addData['accessoryID']\">\r\n                <a-select-option v-for=\"item in this.models\" :key=\"item.accessory\" :value=\"item.accessory\">\r\n                  {{item.model}}\r\n                </a-select-option>\r\n              </a-select>\r\n              <!-- 选择型号 -->\r\n            </a-form-item>\r\n            <a-form-item :label=\"attributeNum.cnType\">\r\n              <!-- 选择数量 -->\r\n              <a-input-number\r\n                v-model=\"addData[attributeNum.type]\"\r\n                :defaultValue=\"1\"\r\n                :min=\"1\"\r\n                :formatter=\"value => ` ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\"\r\n                :parser=\"value => value.replace(/\\$\\s?|(,*)/g, '')\"\r\n              />\r\n            </a-form-item>\r\n            <a-form-item :label=\"attributeWarehouse.cnType\">\r\n              <a-select\r\n                label=\"attributeWarehouse.cnType\"\r\n                placeholder=\"请选择仓库\"\r\n                showSearch\r\n                :allowClear=\"true\"\r\n                optionFilterProp=\"children\"\r\n                v-model=\"addData['warehouse']\">\r\n                <a-select-option v-for=\"item in warehouses\" :key=\"item\" :value=\"item\">{{item}}</a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item :wrapperCol=\"{ span: 24 }\" style=\"text-align: center\">\r\n              <div class=\"button-group\">\r\n                <a-button\r\n                  size=\"default\"\r\n                  class=\"button\"\r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  @click=\"showModal\"\r\n                  :disabled=\"emptyInput\"\r\n                >添加\r\n                </a-button>\r\n                <a-modal\r\n                  title=\"确认信息\"\r\n                  :visible=\"visible\"\r\n                  @ok=\"handleOk\"\r\n                  :confirmLoading=\"confirmLoading\"\r\n                  @cancel=\"handleCancel\"\r\n                >\r\n                  <p>{{`是否将 ${addData.num} 个编码为 ${addData.accessoryID} 的配件添加到 ${addData.warehouse}？`}}</p>\r\n                </a-modal>\r\n                <a-button\r\n                  size=\"default\"\r\n                  class=\"button\"\r\n                  type=\"danger\"\r\n                  @click=\"onClickClearSelect\"\r\n                  :disabled=\"emptyInput\"\r\n                >清空\r\n                </a-button>\r\n                <a-button style=\"margin-left: 8px\" @click=\"cancelAddForm\"\r\n                >取消\r\n                </a-button>\r\n              </div>\r\n            </a-form-item>\r\n          </a-form>\r\n        </a-modal>\r\n\r\n\r\n        <!-- input bar end -->\r\n        <!-- refresh button -->\r\n        <a-row :gutter=\"24\">\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"编号查询\">\r\n              <a-input placeholder=\"请输入待查询编号\" v-model=\"input\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n          <a-col :span=\"16\" style=\"text-align: right\">\r\n            <div style=\"margin-top: 2.5rem\">\r\n              <a-button\r\n                style=\"margin-right : 1rem\"\r\n                @click=\"addAccessoryButton()\"\r\n                type=\"primary\"\r\n                icon=\"plus\"\r\n              >添加配件\r\n              </a-button>\r\n              <a-button\r\n                size=\"default\"\r\n                type=\"primary\"\r\n                style=\"text-align: right\"\r\n                @click=\"onClickReload\"\r\n                icon=\"reload\"\r\n              >刷新表单\r\n              </a-button>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col :span=\"8\" style=\"text-align: right\">\r\n            <div >\r\n\r\n            </div>\r\n          </a-col>\r\n        </a-row>\r\n      </a-layout>\r\n    </div>\r\n      <!-- input bar end -->\r\n      <!-- refresh button -->\r\n      \r\n  \r\n      <!-- table -->\r\n      <a-card>\r\n        <a-table :columns=\"columns\" :dataSource=\"DataShow\" :loading=\"loading\" />\r\n      </a-card>\r\n      <!-- table end -->\r\n\r\n\r\n  </page-view>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getAccessoryKind,\r\n    getAccessoryInWarehouse,\r\n    getAllType,\r\n    addAccessoryInWarehouse,\r\n    getWarehouseName\r\n  } from '@/api/accessory'\r\n  import Fuse from 'fuse.js'\r\n  import { PageView } from '@/layouts'\r\n  import ARow from \"ant-design-vue/es/grid/Row\";\r\n\r\n\r\n  export default {\r\n    components:{\r\n      ARow,\r\n      PageView\r\n    },\r\n    data() {\r\n      return {\r\n        //form\r\n        loading: true,\r\n        input:'',\r\n        visible: false,\r\n        confirmLoading: false,\r\n        ModalText: '',\r\n        attributeModelID: {\r\n          type: 'modelID',\r\n          cnType: '型号编号',\r\n          guide: '请输入型号编号'\r\n        },\r\n        attributeNum: {\r\n          type: 'num',\r\n          cnType: '数量',\r\n          guide: '请输入配件数量'\r\n        },\r\n        attributeWarehouse: {\r\n          type: 'warehouse',\r\n          cnType: '仓库名称',\r\n          guide: '请输入仓库名称'\r\n        },\r\n        //table columns\r\n        columns: [\r\n          {\r\n            title: '型号编号',\r\n            dataIndex: 'model',\r\n            align: 'center',\r\n          }, {\r\n            title: '配件类型',\r\n            dataIndex: 'type',\r\n            filters: [],\r\n            align: 'center',\r\n            onFilter: (value, record) => record.type.indexOf(value) === 0\r\n          }, {\r\n            title: '价格',\r\n            dataIndex: 'price',\r\n            sorter: (a, b) => a['price'] - b['price']\r\n          }, {\r\n            title: '库存数量',\r\n            dataIndex: 'num',\r\n            align: 'center',\r\n            sorter: (a, b) => a['num'] - b['num']\r\n          }, {\r\n            title: '所在仓库',\r\n            dataIndex: 'warehouse',\r\n            filters: [],\r\n            align: 'center',\r\n            onFilter: (value, record) => record.warehouse.indexOf(value) === 0\r\n          }],\r\n        //table selection\r\n\r\n        //form selection\r\n\r\n        //data\r\n        addData: {\r\n          accessoryID: '',\r\n          num: '',\r\n          warehouse: ''\r\n        },\r\n        Data: [],\r\n        DataShow: [],\r\n        warehouses: [],\r\n        types: [],\r\n        models: [],\r\n        showAddForm: false,\r\n\r\n        form: this.$form.createForm(this),\r\n\r\n\r\n      }\r\n    },\r\n    watch: {\r\n      input(pattern){\r\n        if( !pattern){\r\n          console.log(\"pattern\",pattern)\r\n\r\n          this.DataShow = this.Data\r\n        } else {\r\n          const option = {\r\n            keys: ['model'],\r\n            threshold: 0.1\r\n          }\r\n          var fuse = new Fuse(this.Data, option)\r\n          this.DataShow = fuse.search(pattern)\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      emptyInput() {\r\n        if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\r\n          return true\r\n        else return false\r\n      }\r\n    },\r\n    methods: {\r\n      //add accessory button\r\n      addAccessoryButton() {\r\n        this.showAddForm = true\r\n      },\r\n      cancelAddForm() {\r\n        this.showAddForm = false\r\n      },\r\n      //show notification\r\n      openNotification () {\r\n        this.$notification.open({\r\n          message: '提示信息',\r\n          description: '添加成功！',\r\n          onClick: () => {\r\n            console.log('Notification Clicked!');\r\n          },\r\n        });\r\n      },\r\n      //show modal\r\n      showModal() {\r\n        this.visible = true\r\n      },\r\n      handleOk(e) {\r\n        this.showAddForm = false\r\n        this.confirmLoading = true;\r\n        setTimeout(() => {\r\n          this.visible = false;\r\n          this.confirmLoading = false;\r\n          this.onClickSubmit();\r\n          this.openNotification();\r\n          console.log(\"addData\", this.addData)\r\n          //   this.onClickClearSelect()\r\n        }, 10)\r\n      },\r\n      handleCancel(e) {\r\n        console.log('Clicked cancel button');\r\n        this.visible = false\r\n      },\r\n      //  refresh Table\r\n\r\n      onClickReload () {\r\n        this.loading=true\r\n        getAccessoryInWarehouse().then((response) => {\r\n          var temp = [...response.data]\r\n          var result=[]\r\n          for(let item of temp){\r\n            var t = {\r\n              'key': item['key']+item['warehouseID'],\r\n              'model': item['model'],\r\n              'type' : item.type,\r\n              'price': item['price'],\r\n              'num': item['num'],\r\n              'warehouse': item['warehouse']\r\n            }\r\n            result.push(t)\r\n          }\r\n          this.Data = result\r\n          this.DataShow = this.Data\r\n          this.input = ''\r\n          this.loading=false\r\n        })\r\n      },\r\n      onClickClearSelect() {\r\n        this.addData.accessoryID = ''\r\n        this.addData.num = ''\r\n        this.addData.warehouse = ''\r\n      },\r\n      onClickSubmit() {\r\n        addAccessoryInWarehouse(this.addData).then(() => {\r\n          this.onClickReload();\r\n          console.log(this.addData)\r\n        })\r\n\r\n      }\r\n    },\r\n    created() {\r\n      //get table\r\n      getAccessoryKind().then((response) => {\r\n        console.log('model', response)\r\n        this.models = [...response.data]\r\n      })\r\n     getAccessoryInWarehouse().then((response) => {\r\n          var temp = [...response.data]\r\n          var result=[]\r\n          for(let item of temp){\r\n            var t = {\r\n              'key': item['key']+item['warehouseID'],\r\n              'model': item['model'],\r\n              'type' : item['type'],\r\n              'price': item['price'],\r\n              'num': item['num'],\r\n              'warehouse': item['warehouse']\r\n            }\r\n            result.push(t)\r\n          }\r\n          this.Data = result\r\n          this.DataShow = this.Data\r\n          this.input = ''\r\n          this.loading=false\r\n        })\r\n      //get all warehouseName\r\n      getWarehouseName().then((response) => {\r\n        this.warehouseSelection = [...response.data]\r\n        for (let val of this.warehouseSelection) {\r\n          let temp = {\r\n            'text': val,\r\n            'value': val\r\n          }\r\n          this.columns[4].filters.push(temp)\r\n          this.warehouses.push(val)\r\n        }\r\n        console.log(response)\r\n      })\r\n      //get all type\r\n      getAllType().then((response) => {\r\n        this.types = [...response.data]\r\n        for (let val of this.types) {\r\n          let temp = {\r\n            text: val,\r\n            value: val\r\n          }\r\n          this.columns[1].filters.push(temp)\r\n        }\r\n        console.log(response)\r\n      })\r\n\r\n\r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import '~ant-design-vue/lib/style/themes/default.less';\r\n\r\n  #layout .ant-layout-header {\r\n    background: #fff;\r\n    color: #666;\r\n  }\r\n\r\n  .button-group {\r\n    margin-bottom: 1rem;\r\n\r\n    .button {\r\n      margin-right: 0.5rem;\r\n      margin-left: 0.5rem;\r\n      margin-top: 2.7rem;\r\n    }\r\n  }\r\n\r\n  .button-group2 {\r\n    margin-top: 3em;\r\n    margin-bottom: 1rem;\r\n    margin-left: 39rem\r\n  }\r\n</style>"],"sourceRoot":"src/views/accessory"}]}